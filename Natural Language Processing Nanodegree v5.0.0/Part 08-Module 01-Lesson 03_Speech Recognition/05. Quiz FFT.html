<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Quiz: FFT
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Speech Recognition
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Intro.html">
       01. Intro
      </a>
     </li>
     <li class="">
      <a href="02. Challenges in ASR.html">
       02. Challenges in ASR
      </a>
     </li>
     <li class="">
      <a href="03. Signal Analysis.html">
       03. Signal Analysis
      </a>
     </li>
     <li class="">
      <a href="04. References Signal Analysis.html">
       04. References: Signal Analysis
      </a>
     </li>
     <li class="">
      <a href="05. Quiz FFT.html">
       05. Quiz: FFT
      </a>
     </li>
     <li class="">
      <a href="06. Feature Extraction with MFCC.html">
       06. Feature Extraction with MFCC
      </a>
     </li>
     <li class="">
      <a href="07. References Feature Extraction.html">
       07. References: Feature Extraction
      </a>
     </li>
     <li class="">
      <a href="08. Quiz MFCC.html">
       08. Quiz: MFCC
      </a>
     </li>
     <li class="">
      <a href="09. Phonetics.html">
       09. Phonetics
      </a>
     </li>
     <li class="">
      <a href="10. References Phonetics.html">
       10. References: Phonetics
      </a>
     </li>
     <li class="">
      <a href="11. Quiz Phonetics.html">
       11. Quiz: Phonetics
      </a>
     </li>
     <li class="">
      <a href="12. Voice Data Lab Introduction.html">
       12. Voice Data Lab Introduction
      </a>
     </li>
     <li class="">
      <a href="13. Lab Voice Data.html">
       13. Lab: Voice Data
      </a>
     </li>
     <li class="">
      <a href="14. Acoustic Models and the Trouble with Time.html">
       14. Acoustic Models and the Trouble with Time
      </a>
     </li>
     <li class="">
      <a href="15. HMMs in Speech Recognition.html">
       15. HMMs in Speech Recognition
      </a>
     </li>
     <li class="">
      <a href="16. Language Models.html">
       16. Language Models
      </a>
     </li>
     <li class="">
      <a href="17. N-Grams.html">
       17. N-Grams
      </a>
     </li>
     <li class="">
      <a href="18. Quiz N-Grams.html">
       18. Quiz: N-Grams
      </a>
     </li>
     <li class="">
      <a href="19. References Traditional ASR.html">
       19. References: Traditional ASR
      </a>
     </li>
     <li class="">
      <a href="20. A New Paradigm.html">
       20. A New Paradigm
      </a>
     </li>
     <li class="">
      <a href="21. Deep Neural Networks as Speech Models.html">
       21. Deep Neural Networks as Speech Models
      </a>
     </li>
     <li class="">
      <a href="22. Connectionist Tempora Classification (CTC).html">
       22. Connectionist Tempora Classification (CTC)
      </a>
     </li>
     <li class="">
      <a href="23. References Deep Neural Network ASR.html">
       23. References: Deep Neural Network ASR
      </a>
     </li>
     <li class="">
      <a href="24. Outro.html">
       24. Outro
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          05. Quiz: FFT
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="fast-fourier-transforms">
          Fast Fourier Transforms
         </h2>
         <p>
          An
          <a href="https://en.wikipedia.org/wiki/Fast_Fourier_transform" rel="noopener noreferrer" target="_blank">
           FFT
          </a>
          , or Fast Fourier Transform, is an efficient implementation of a Discrete Fourier Transform.  The algorithm transforms a sum of sinusoidal signals into into its pure frequency components.  In the following quiz, we will demonstrate adding sinusoidal waves together and then deconstructing them back into their component frequencies.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/sum-of-components.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h3 id="instructions">
          Instructions
         </h3>
         <h5 id="choose_frequencies">
          <code>
           choose_frequencies
          </code>
         </h5>
         <p>
          In the first definition,
          <code>
           choose_frequencies
          </code>
          , choose three frequencies in a range from 1 to 50.  These are the number of full cycles each sinusoidal wave will have in one "time unit".  Running the definition will produce a visual of the three chosen frequencies as well as a new wave that is the sum of the three.  This is similar to an acoustic signal, which is the sum of many sinusoidal waves.  The waves may have different phases and amplitudes as well.  Here's an example of a choice of (3, 8, 1) for the three frequencies.
         </p>
         <h5 id="add_the_waves">
          <code>
           add_the_waves
          </code>
         </h5>
         <p>
          The second definition is where the waves are created.  For this demonstration, we will only create three.  This has been done for you with the
          <code>
           utils.make_waves
          </code>
          function - take a look at to understand how it works. You just need to add them together.  This simulates an audio signal, which is really just sinusoidal waves added together.  In audio signals, the sinusoidal waves are created by sound vibrations and may be at varying amplitudes and phase as well as frequency.  To simulate this variety, the
          <code>
           utils.make_waves
          </code>
          function provides random amplitudes and phase shifts.
         </p>
         <h5 id="demo_fft">
          <code>
           demo_fft
          </code>
         </h5>
         <p>
          An FFT can be created with a variety of library functions including
          <a href="https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.fftpack.fft.html" rel="noopener noreferrer" target="_blank">
           scipy.fftpack.fft
          </a>
          , which we'll use in this quiz.  Read the linked reference to understand how to use it in code.
         </p>
         <p>
          This FFT algorithm will create both positive and negative values, but we'll just display the positive ones.  When you're done, you should see something like the following, showing peaks at the three frequency values originally provided!
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/fft.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h4>
          Start Quiz:
         </h4>
         <div>
          <div class="nav nav-tabs nav-fill" id="question-tabs" role="tablist">
           <a aria-controls="331273-function-py" aria-selected="true" class="nav-item nav-link active show" data-toggle="tab" href="#331273-function-py" id="tab-331273-function-py" role="tab">
            function.py
           </a>
           <a aria-controls="331273-utils-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#331273-utils-py" id="tab-331273-utils-py" role="tab">
            utils.py
           </a>
           <a aria-controls="331273-solution-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#331273-solution-py" id="tab-331273-solution-py" role="tab">
            solution.py
           </a>
          </div>
          <div class="tab-content" id="question-tab-contents" style="padding: 20px 0;">
           <div aria-labelledby="tab-331273-function-py" class="tab-pane active show" id="331273-function-py" role="tabpanel">
            <pre><code></code>import numpy as np
import scipy.fftpack
import utils as utils

def choose_frequencies():
    """
    # provide three frequencies in a range between 1 and 50    
    :return: [int, int, int]
    """
    # *** TODO provide three frequencies between 1 and 50
    freq1 = None
    freq2 = None
    freq3 = None
    # end TODO

    return [freq1, freq2, freq3]


def add_the_waves(freqs):
    """
    create three sinusoidal waves and one wave that is the sum of the three
    :param freqs: [int, int, int]
    :return: [np.array, np.array, np.array, np.array]
        representing wave1, wave2, wave3, sum of waves
        each array contains 500(by default) discrete values for plotting a sinusoidal
    """
    _, _, t = utils.get_wave_timing()
    w1, w2, w3 = utils.make_waves(t, freqs)

    # TODO sum the waves together to form sum_waves
    sum_waves = None
    # end TODO

    return [w1, w2, w3, sum_waves]


def demo_fft(sum_waves):
    num_samples, spacing, _ = utils.get_wave_timing()

    # TODO create a Fast Fourier Transform of the waveform using scipy.fftpack.fft
    # named 'y_fft'
    y_fft = None
    # end TODO

    x_fft = np.linspace(0.0, 1.0/spacing, num_samples)
    return x_fft, y_fft</pre>
           </div>
           <div aria-labelledby="tab-331273-utils-py" class="tab-pane" id="331273-utils-py" role="tabpanel">
            <pre><code></code>import matplotlib.pyplot as plt
import numpy as np

def sinusoid(freq):
    """
    return a sinusoidal of random amplitude and phase for a given frequency
    :param freq: 
    :return: 
    """
    phase = np.random.random()
    amplitude = 2 * (np.random.random_integers(1, 10))
    return amplitude * np.cos(2 * np.pi * freq - phase)


def get_wave_timing(num_samples=500, range_of_time = 5.0):
    """
    provide an array of time values of size num_samples spread evenly over range_of_time
    :param num_samples: int 
    :param range_of_time: float
    :return: int, float, np.array
    """
    # sample spacing
    spacing = range_of_time / num_samples
    # array for time samples
    t = np.linspace(0.0, range_of_time, num_samples)
    return num_samples, spacing, t


def make_waves(t, freqs):
    """
    convert three frequencies into arrays of discrete values representing sinusoidal waves
    :param freqs: [float, float, float]
    :return: [np.array, np.array, np.array]
    """
    w0 = sinusoid(t * freqs[0])
    w1 = sinusoid(t * freqs[1])
    w2 = sinusoid(t * freqs[2])
    return w0, w1, w2


# def display_sinusoids(time_array, f1, f2, f3, sum):
#     # plot three frequencies with random phase shifts on y axis
#     # plt.figure()
#     fig, ax = plt.subplots(4, 1)
#     # plt.subplot(411)  # 3 rows, 1 column, fignum 1
#     ax[0].plot(time_array, f1)
#     ax[0].set_title('1st frequency component')

#     # plt.subplot(412)  # 3 rows, 1 column, fignum 2
#     ax[1].plot(time_array, f2)
#     ax[1].set_title('2nd frequency component')

#     # plt.subplot(413)  # 3 rows, 1 column, fignum 3
#     ax[2].plot(time_array, f3)
#     ax[2].set_title('3rd frequency component')

#     # sum
#     # plt.subplot(414)  # 3 rows, 1 column, fignum 4
#     ax[3].plot(time_array, sum, 'r')
#     ax[3].set_title('Sum of components')
#     ax[3].set_ylabel('amplitude')
#     ax[3].set_xlabel('time')

#     # adjust format of display to make room for titles
#     plt.subplots_adjust(
#         top=0.94,
#         bottom=0.11,
#         left=0.11,
#         right=0.97,
#         hspace=0.65,
#         wspace=0.2
#     )
#     # plt.show()
#     return fig


# def display_fft(xf, yf):
#     num_samples = np.shape(yf)[0]
#     fig, ax = plt.subplots()
#     ax.plot(xf, 2.0 / num_samples * np.abs(yf[:num_samples // 2]))
#     plt.title('Fast Fourier Transform')
#     plt.xlabel('frequency')
#     plt.ylabel('amplitude')
#     return fig
</pre>
           </div>
           <div aria-labelledby="tab-331273-solution-py" class="tab-pane" id="331273-solution-py" role="tabpanel">
            <pre><code></code>import numpy as np
import scipy.fftpack
import utils as utils

def choose_frequencies():
    """
    # provide three frequencies in a range between 1 and 50    
    :return: [int, int, int]
    """
    # *** TODO provide three frequencies between 1 and 50
    freq1 = 1
    freq2 = 5
    freq3 = 25
    # end TODO

    return [freq1, freq2, freq3]


def add_the_waves(freqs):
    """
    create three sinusoidal waves and one wave that is the sum of the three
    :param freqs: [int, int, int]
    :return: [np.array, np.array, np.array, np.array]
        representing wave1, wave2, wave3, sum of waves
        each array contains 500(by default) discrete values for plotting a sinusoidal
    """
    _, _, t = utils.get_wave_timing()
    w1, w2, w3 = utils.make_waves(t, freqs)

    # TODO sum the waves together to form sum_waves
    sum_waves = w1+w2+w3
    # end TODO

    return [w1, w2, w3, sum_waves]


def demo_fft(sum_waves):
    num_samples, spacing, _ = utils.get_wave_timing()

    # TODO create a Fast Fourier Transform of the waveform using scipy.fftpack.fft
    # named 'y_fft'
    y_fft = scipy.fftpack.fft(sum_waves)
    # end TODO

    x_fft = np.linspace(0.0, 1.0/spacing, num_samples)
    return x_fft, y_fft</pre>
           </div>
          </div>
         </div>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="06. Feature Extraction with MFCC.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('05. Quiz: FFT')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
